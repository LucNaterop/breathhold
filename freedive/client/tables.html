<template name="tables">
	{{#contentFor "headerTitle"}}
		<h1 class="title">Tables</h1>
	{{/contentFor}}
	{{#contentFor "headerButtonLeft"}}
		<button class="button button-clear pull-left" data-ion-menu-toggle="left">
		{{> ionIcon icon='navicon'}}
		</button>
	{{/contentFor}}
	{{#contentFor "headerButtonRight"}}
		<button class="button button-clear pull-right" data-ion-modal="createTable">
			{{> ionIcon icon='android-add'}}
		</button>
	{{/contentFor}}

	{{#ionList}}
		{{#each tables}}
			{{> tableListItem}}
		{{/each}}
		<br><br>
		<p>You can create your own custom table by clicking on the little plus. </p>
	{{/ionList}}
</template>

<template name="tableListItem">
	<a id="tableElement" href="/table/{{_id}}" class="item item-icon-right">
		<h2>{{name}}</h2>
		<p>{{description}}</p>
		<button id="deleteTable" data-id="{{_id}}" class="button button-assertive button-clear">Remove</button>
		<i class="icon ion-chevron-right positive"></i>
	</a>
</template>

<template name="table">
	{{#contentFor "headerTitle"}}
		<h1 class="title">{{table.name}}</h1>
	{{/contentFor}}
	{{#if hideTabs}}
		{{#contentFor "headerButtonLeft"}}
		{{/contentFor}}
	{{else}}
		{{#contentFor "headerButtonLeft"}}
			{{>ionNavBackButton id="backButton" text="Back"}}
		{{/contentFor}}
	{{/if}}

	<p> </p>
	 <div style='text-align: center'>
		{{#if started}}
			<button id='stop' class='button button-assertive icon-left ion-stop'>Stop session</button>
		{{else}}
			<button id='start' class='button button-positive icon-left ion-play'>Start session</button>
		{{/if}}
		<div class="row">
			<div class="col"><h2>Breathe</h2></div>
			<div class="col"><h2>Hold</h2></div>
		</div>
		{{#each rows}}
			{{> row}}
		{{/each}}
		<br><br>	
		<div style="text-align: left">
			<p>Total breath time is <b>{{table.totalBreathTime}}</b> <br> Total hold time is <b>{{table.totalHoldTime}}</b> <br> This table therefore takes <b>{{table.totalTime}}</b> </p>
		</div>
		<div style='height: 20px'></div>
	</div>

</template>

<template name="row">
	<div class="row" style='font-family: "Courier New", Courier, monospace; font-weight: 500 '>
		<div class="col timer breathe" style='font-size: 25px; border-radius: 10px'>{{breathe}}</div>
		<div class="col timer hold" style='font-size: 25px; border-radius: 10px'>{{hold}}</div>
	</div>
</template>


<template name="createTable">
	{{#ionModal title='Create new Table' }}
		<div class="list">
			<div class='list card'>
				<div class="item item-divider">General</div>
				<div class="item">
					<label class="item item-input">
						<input id='tableName' type="text" placeholder="Table name"><br>
					</label>
					<label class="item item-input">
						<input id='description' type="text" placeholder="Description (optional)"><br>
					</label>
				</div>
			</div>

			<div class="padding"><p>Now you can create your custom table by setting each duration individually by entering the amount of seconds. Add as many rows as you need. </p></div>

			<div class="table">
				<div class="row">
					<div class="col">Breathe</div><div class="col ">Hold</div>
				</div>
				{{#each durations}}
				<div class="row">
					<div class="col">
						<input class="duration" type="number" style="border: 1px dotted #ccc; padding-left: 10px" placeholder="seconds">
					</div>
					<div class="col">
						<input class="duration" style="border: 1px dotted #ccc; padding-left: 10px" type="number" max="1800" placeholder="seconds">
					</div>
				</div>
				{{/each}}
				<div style="text-align: center"><button id="addRow" class="button button-positive button-clear icon-left ion-plus-round"> Row </button></div>
			</div>
			<br>
			<div class="padding">
				<button id="save" class="button button-positive button-block"> Save table </button>
			</div>
			<div style="height: 50px"></div>
		</div>
	{{/ionModal}}
</template>

